<!DOCTYPE html>
<html lang="zh-TW">

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="description"  content="G4+G9定向越野賽程"/>
<meta property="line:type" content="application/geo+json" />
<meta property="line:title" content="G4+G9定向越野賽程" />
<meta property="line:description" content="歡迎參加定向越野四67班的G4+G9設計的定向越野賽程" />
<meta property="line:url" content="https://liff.line.me/1657132012-O3qB3DEa" />
<meta property="line:site_name" content="G4+G9定向越野賽程" />
<meta property="line:image" content="static/img/map.png" />
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC|Noto+Serif+TC&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" integrity="sha256-46qynGAkLSFpVbEBog43gvNhfrOj+BmwXdxFgVK/Kvc=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link href="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.10.5/viewer.css" rel="stylesheet">
<link rel="stylesheet" href="static/css/index.css">
<title>G4+G9定向越野賽程</title>
    {% block title %}{% endblock %}
    </head>
    {% block main %}
<body>
<!-- 先宣告一個巨集 -->
{% macro easy_text_form(col_name, note) -%} {%- endmacro %}
<nav class="navbar navbar-dark bg-dark">
    <span class="material-icons">
        explore
        </span>
    <a class="navbar-brand text-light">定向</a>
    <div class="topnav-right">
        <a type="button" class="btn float-right" id="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
        </a>
    </div>
</nav>

<div class="container">
</div>
<div class="row">
    <div class="col">

        <ul class="list-group list-group-horizontal justify-content-center">
            <li class="list-group-item flex-fill">暱稱:</li>
            <li class="list-group-item flex-fill" id="name">我</li>
            <li class="list-group-item flex-fill ">狀態:</li>
            <li class="list-group-item flex-fill " id="state">等待中</li>
        </ul>
        <ul class="list-group list-group-horizontal-sm justify-content-center">
            <li class="list-group-item ">
                <label for="studentNumber" class=" col-form-label">
                        學號:
                    </label>
            </li>
            <li class="list-group-item flex-fill">
                <div class="col-sm-10">
                    {% if sc is defined %}
                        <input class="form-control" id="sc" readonly value={{sc}} >
                    {% else %}
                        <input class="form-control" id="sc" placeholder="請輸入學號">
                    {% endif %}
                    <a class="btn btn btn-outline-info btn-sm" role="button" id="cal">開始</a>
                </div>
            </li>
        </ul>
        <ul class="list-group list-group-horizontal-md justify-content-center">
            <li class="list-group-item flex-fill">計時器:</li>
            <li class="list-group-item flex-fill" id="now">0:00:00</li>
            <li class="list-group-item flex-fill">總計:</li>
            <li class="list-group-item flex-fill" id="all">0:00:00</li>
            <li class="list-group-item flex-fill">距離:</li>
            <li class="list-group-item flex-fill" id="dist">計算中</li>

        </ul>

    </div>
</div>

<div class="row">
    <div class="col">
        <div class="btn-toolbar mb-3 justify-content-center" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group mr-2 btn-group-justified" role="group" aria-label="First group" id="g1">
                <button type="button" value="0" class="btn btn-danger active">起點</button>
                <button type="button" value="1" class="btn btn-danger">01</button>
                <button type="button" value="2" class="btn btn-danger">02</button>
                <button type="button" value="3" class="btn btn-danger">03</button>
                <button type="button" value="4" class="btn btn-danger">04</button>
                <button type="button" value="5" class="btn btn-danger">05</button>
                <button type="button" value="6" class="btn btn-danger">06</button>
                <button type="button" value="7" class="btn btn-danger">07</button>
            </div>
        </div>
        <div class="btn-toolbar justify-content-center" role="toolbar" aria-label="Toolbar with button groups">
            <div class="btn-group btn-group-justified" role="group" aria-label="First group" id="g2">
                <button type="button" value="8" class="btn btn-danger">08</button>
                <button type="button" value="9" class="btn btn-danger">09</button>
                <button type="button" value="10" class="btn btn-danger">10</button>
                <button type="button" value="11" class="btn btn-danger">11</button>
                <button type="button" value="12" class="btn btn-danger">12</button>
                <button type="button" value="13" class="btn btn-danger">13</button>
                <button type="button" value="14" class="btn btn-danger">14</button>
                <button type="button" value="15" class="btn btn-danger">終點</button>
            </div>

        </div>
        <div class="vertical-center text-center">
            <button class="button button--hyperion" id="prev">
                <span><span>上一個</span></span>
            </button>
            <button class="button button--hyperion" id="next">
                <span><span>下一個</span></span>
            </button>
        </div>

        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="card d-block mx-auto w-50">
                    <img src="static/img/0/0.jpg" class="card-img-top" alt="..." id="pic">
                    <div class="card-body">
                        <p class="card-text" id="p">起點</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


{% endblock %}
{% block script %}
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viewerjs/1.10.5/viewer.min.js"></script>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script src="static/js/local.js"></script>
<script>
var green = []
var red = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14];
var ini = app.getIni();
{% if data is defined %}
    var green = {{data}}
    {% if data|length != 16 %}
        green.pop();
    {% else %}

    {% endif%}
    ini = true;
    {% set Count = 0 %}
    {% for item in data %}
            {% if loop.last %}
                {% set Count = loop.length %}
                    for(i=0;i<Math.max(({{Count}}-2),0);i++){
                        red.shift();
                    }
            {% endif %}
            if (parseInt(green[{{item}}]) <= 7) {
               $('#g1 > button.btn').eq(green[{{item}}]).removeClass('btn-danger').addClass('btn-success');
            }
            if(parseInt(green[{{item}}]) >= 8) {
               $('#g2 > button.btn').eq(green[{{item}}]-8).removeClass('btn-danger').addClass('btn-success');
            }

    {%- endfor %}

{% else %}

{% endif %}

var liffID = '';

liff.init({
        liffId: liffID
    }).then(function() {
        // 這邊開始寫使用其他功能
        if (liff.isLoggedIn()) {
            if (liff.isInClient) {
                liff.getProfile().then(function(profile) {
                    const userId = profile.userId;
                    const name = profile.displayName;
                    const pictureUrl = profile.pictureUrl;
                    const statusMessage = profile.statusMessage;
                    document.getElementById("name").innerHTML = name
                    id = JSON.stringify({
                        id:userId,
                    })
                    $.ajax({
                        url: "/get",
                        type: "POST",
                        contentType: 'application/json',
                        accept: 'application/json',
                        dataType: 'json',
                        data: id,
                        success: (data) => {
                            alert("取得用戶ID");
                            }
                        })
                    }).catch(function(error) {
                        console.log('error', err);
                        alert('無法取得lineID')
                });
                const accessToken = liff.getAccessToken();
                alert("取得accessToken");
            } else {
                alert('請以lineApp開啟')
            }

        }else{
            alert('尚未登入')
        }
    }).catch(function(error) {
        console.log(error);
    });
</script>
{% endblock %}
</body>
</html>
